(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{273:function(t,s,a){t.exports=a.p+"assets/img/header.2a488027.png"},274:function(t,s,a){t.exports=a.p+"assets/img/eclipse-2023-06.4d925354.png"},275:function(t,s,a){t.exports=a.p+"assets/img/set-jre.6049ae3f.png"},276:function(t,s){t.exports="data:image/png;base64,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"},302:function(t,s,a){t.exports=a.p+"assets/img/packages.e798c96e.png"},313:function(t,s,a){"use strict";a.r(s);var e=a(14),n=Object(e.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"yet-another-todo-list-yatl-part-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#yet-another-todo-list-yatl-part-2"}},[t._v("#")]),t._v(" Yet Another Todo List (YATL) - Part 2")]),t._v(" "),s("p",[s("img",{attrs:{src:a(273),alt:"Todo List"}})]),t._v(" "),s("p",[t._v("This is the second part of our two part lab series on building the API for YATL. In this part, we will consider how we can write a comprehensive set of tests for our API.")]),t._v(" "),s("h2",{attrs:{id:"learning-objectives"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#learning-objectives"}},[t._v("#")]),t._v(" Learning Objectives")]),t._v(" "),s("ul",[s("li",[t._v("Understanding how to write unit, feature, and systems tests.")]),t._v(" "),s("li",[t._v("Working with the Junit and RestAssured libraries.")]),t._v(" "),s("li",[t._v("Understanding how to mock using Mockito.")])]),t._v(" "),s("h2",{attrs:{id:"exercise-1-setting-up-the-project"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exercise-1-setting-up-the-project"}},[t._v("#")]),t._v(" Exercise 1: Setting up the Project")]),t._v(" "),s("p",[t._v("In this section, you will grab the starter code and install some dependencies to support you in testing it.")]),t._v(" "),s("h3",{attrs:{id:"exercise-1-1-cloning-the-repository"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exercise-1-1-cloning-the-repository"}},[t._v("#")]),t._v(" Exercise 1.1: Cloning the Repository")]),t._v(" "),s("p",[t._v("Note: The starting repository is the solution to the previous lab. If you have not completed the previous lab, and are happy with it, you don't need to clone this repository. You can use your own code.")]),t._v(" "),s("ol",[s("li",[s("p",[t._v("Open a terminal window.")])]),t._v(" "),s("li",[s("p",[t._v("Navigate to the directory where you want the project to be located.")])]),t._v(" "),s("li",[s("p",[t._v("Run the following command to clone the repository:")]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[t._v("\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://gitlab.surrey.ac.uk/com_1028_labs/lab-6.git\n")])])])])]),t._v(" "),s("p",[t._v("The above command will clone the repository into a directory called "),s("code",[t._v("lab-6")]),t._v(".")]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("Open Eclipse (There are two versions on the lab machines. Open the latest version, 2023 to 06)")])]),t._v(" "),s("p",[s("img",{attrs:{src:a(274),alt:""}})]),t._v(" "),s("ol",{attrs:{start:"5"}},[s("li",[s("p",[t._v("Import the project folder into your Eclipse Workspace: "),s("code",[t._v("File -> Open Projects from File System -> Directory")])])]),t._v(" "),s("li",[s("p",[t._v("We need to ensure we are using Java 17, or higher. In your package explorer in the root of your project, you should see a file called "),s("code",[t._v("JRE System Library")]),t._v(". Right click on this and select "),s("code",[t._v("Properties")]),t._v(". In the "),s("code",[t._v("Execution Environment")]),t._v(" section, select "),s("code",[t._v("JavaSE-17")]),t._v(" and click "),s("code",[t._v("Apply and Close")]),t._v(".")])])]),t._v(" "),s("p",[s("img",{attrs:{src:a(275),alt:"Java 17"}})]),t._v(" "),s("p",[s("img",{attrs:{src:a(276),alt:"Java 17"}})]),t._v(" "),s("ol",{attrs:{start:"6"}},[s("li",[s("p",[t._v("At this stage, you should be able to run the project. Right click on "),s("code",[t._v("src/main/java/com/yatl/Main.java")]),t._v(" and select "),s("code",[t._v("Run As -> Java Application")]),t._v(". In the console, you may see some warnings regarding a logger not being set up, ignore this")])]),t._v(" "),s("li",[s("p",[t._v("To test your application is work open Firefox and navigate to "),s("code",[t._v("http://localhost:8000/todos")]),t._v(". You should see a JSON response with an empty array.")])])]),t._v(" "),s("p",[s("strong",[t._v("TIP: Ensure you use Firefox or Chrome with a JSON extension installed. Otherwise, the API output will be hard to read")])]),t._v(" "),s("ol",{attrs:{start:"8"}},[s("li",[s("p",[t._v("Explore the further functionality of the API by using the following endpoints:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("http://localhost:8000/todos")])]),t._v(" "),s("li",[s("code",[t._v("http://localhost:8000/todos/1")])]),t._v(" "),s("li",[s("code",[t._v("http://localhost:8000/todos/?status=completed")])]),t._v(" "),s("li",[s("code",[t._v("http://localhost:8000/todos/?status=active")])])])])]),t._v(" "),s("p",[t._v("JSON is a format for storing and transporting data. A front end developer would use this data to display the information to the user. For example, a front end developer could use the data from the "),s("code",[t._v("/todos")]),t._v(" endpoint to display a list of todos to the user. "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Objects/JSON",target:"_blank",rel:"noopener noreferrer"}},[t._v("You can read more about JSON here"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"exercise-1-2-installing-dependencies"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exercise-1-2-installing-dependencies"}},[t._v("#")]),t._v(" Exercise 1.2: Installing Dependencies")]),t._v(" "),s("p",[t._v("In order to test the YATL application, we are going to need to install three testing libraries:")]),t._v(" "),s("ul",[s("li",[t._v("junit - JUnit for unit testing")]),t._v(" "),s("li",[t._v("mockito - Mockito for mocking objects in unit tests")]),t._v(" "),s("li",[t._v("rest-assured - Testing and validating our APIs")])]),t._v(" "),s("ol",[s("li",[s("p",[t._v("See if you can find the above dependencies on the "),s("a",{attrs:{href:"https://mvnrepository.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Maven Repository"),s("OutboundLink")],1),t._v(". When you have found them, add them to the dependencies section of the "),s("code",[t._v("pom.xml")]),t._v(" file. You should install the latests versions of the dependencies. At the time of writing, these are:")]),t._v(" "),s("ul",[s("li",[t._v("junit: 5.10.2")]),t._v(" "),s("li",[t._v("mockito-core: 5.11.0")]),t._v(" "),s("li",[t._v("rest-assured: 5.4.0")])])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://gitlab.surrey.ac.uk/com_1028_labs/lab-6/-/blob/exercise-1-solutions/pom.xml?ref_type=heads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Check your POM.xml file against the solutions"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"exercise-1-3-setting-up-the-test-directory"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exercise-1-3-setting-up-the-test-directory"}},[t._v("#")]),t._v(" Exercise 1.3: Setting up the Test Directory")]),t._v(" "),s("p",[t._v("We are now ready to create some packages for our tests to go in. These packages should be created in the "),s("code",[t._v("src/test/java")]),t._v(" directory. They should mirror the packages in the "),s("code",[t._v("src/main/java")]),t._v(" directory.")]),t._v(" "),s("ol",[s("li",[t._v("To match the "),s("code",[t._v("src/main/java")]),t._v(" directory, right click on the "),s("code",[t._v("src/test/java")]),t._v(" directory and create the following packages:")])]),t._v(" "),s("ul",[s("li",[s("code",[t._v("com.yatl")])]),t._v(" "),s("li",[s("code",[t._v("com.yatl.controller")])]),t._v(" "),s("li",[s("code",[t._v("com.yatl.dao")])]),t._v(" "),s("li",[s("code",[t._v("com.yatl.model")])]),t._v(" "),s("li",[s("code",[t._v("com.yatl.util")])])]),t._v(" "),s("p",[t._v("When done, your "),s("code",[t._v("src/test/java")]),t._v(" directory should look like this:")]),t._v(" "),s("p",[s("img",{attrs:{src:a(302),alt:"Test Directory"}})]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Eclipse sometimes hides empty packages. The best way to avoid this is to click on the three dots in the top right of the package explorer and select "),s("code",[t._v("Filters and Customization")]),t._v(". Then uncheck "),s("code",[t._v("Empty Packages")]),t._v(" and click "),s("code",[t._v("OK")]),t._v(".")])]),t._v(" "),s("h2",{attrs:{id:"exercise-2-testing-the-yatl-application"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exercise-2-testing-the-yatl-application"}},[t._v("#")]),t._v(" Exercise 2: Testing the YATL Application")]),t._v(" "),s("p",[t._v("We are now ready to start writing some tests for our application. In this exercise, we will construct unit and wider reaching integration tests.")]),t._v(" "),s("h3",{attrs:{id:"exercise-2-1-testing-the-todo-model"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exercise-2-1-testing-the-todo-model"}},[t._v("#")]),t._v(" Exercise 2.1: Testing the "),s("code",[t._v("Todo")]),t._v(" Model")]),t._v(" "),s("p",[t._v("Let's consider how we might test "),s("code",[t._v("src/main/java/com/yatl/model/Todo.java")]),t._v(". This class is simply a POJO (Plain Old Java Object) that represents a TODO in our application. Some people make the argument that we don't need to test POJOs (I tend to agree with this); however, let's take the purist approach and write a test for it anyway. Since we are isolating a single object, this can be considered a unit test.")]),t._v(" "),s("ol",[s("li",[t._v("Create a new class called "),s("code",[t._v("TodoTest")]),t._v(" in the "),s("code",[t._v("com.yatl.model")]),t._v(" test package. Add the following skeleton code to the class:")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yatl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("model")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import static"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jupiter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Assertions")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token static"}},[t._v("assertEquals")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jupiter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeforeEach")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jupiter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoTest")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Todo")]),t._v(" todo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this method is called before each test")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// giving us a fresh todo object to work with")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@BeforeEach")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Create a new todo object")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testTodoCreated")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Use the getters to assert the todo object was created with the expected values")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// test each of the getters return the values in the todo object created in the")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// setUp method")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testTodoSetters")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Use the setter to update the todo object and then use the getter to assert")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// the todo object was updated with the expected values")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Complete the above test class, and then run the tests. To run the tests, right click on the "),s("code",[t._v("TodoTest")]),t._v(" class and select "),s("code",[t._v("Run As -> JUnit Test")]),t._v(". You should see the tests pass.")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://gitlab.surrey.ac.uk/com_1028_labs/lab-6/-/blob/exercise-2-1-solution/src/test/java/com/yatl/model/TodoTest.java?ref_type=heads",target:"_blank",rel:"noopener noreferrer"}},[t._v("If you got stuck, check your "),s("code",[t._v("TodoTest")]),t._v(" class against the solutions"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"exercise-2-2-testing-the-tododao-with-an-in-memory-database"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exercise-2-2-testing-the-tododao-with-an-in-memory-database"}},[t._v("#")]),t._v(" Exercise 2.2: Testing the TodoDao with an in-memory database")]),t._v(" "),s("p",[t._v("Let's consider how we might test "),s("code",[t._v("src/main/java/com/yatl/dao/TodoDao.java")]),t._v(". This class is responsible for interacting with the database. As such, it becomes interesting to test. We have two options here:")]),t._v(" "),s("ol",[s("li",[t._v("We could test the class using and in-memory database.")]),t._v(" "),s("li",[t._v("We could mock the database.")])]),t._v(" "),s("p",[t._v("In this case, I prefer the first option. Where possible, I would rather use a real database to test. Mocking can be tricky, especially when we are testing SQL statements. Moreover, If we were to mock our database, all we could really test is methods are called with the correct SQL statements. We wouldn't be able to test the SQL statements return the correct data.")]),t._v(" "),s("ol",[s("li",[t._v("The first thing we need to do is create a new database for our tests. Create a "),s("code",[t._v("TestSeeder")]),t._v(" class in the "),s("code",[t._v("com.yatl.util")]),t._v(" package (ensure it's in your test folder). "),s("a",{attrs:{href:"https://gitlab.surrey.ac.uk/com_1028_labs/lab-6/-/blob/exercise-2-2-solutions/src/test/java/com/yatl/util/TestSeeder.java?ref_type=heads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Next, copy and past the code from from my solution into your "),s("code",[t._v("Seeder")]),t._v(" class."),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("You should notice the test Seeder class is similar to the Seeder class in the "),s("code",[t._v("src/main/java/com/yatl/util")]),t._v(" package. The only major difference is we are returning the connection. We do this, as the database will be created in memory and we can't access it via a path. As such, we need to be able to pass the connection around.")]),t._v(" "),s("ol",[s("li",[t._v("The next thing we need to do is update "),s("code",[t._v("src/main/java/com/yatl/util/Database.java")]),t._v(" to allow us to pass a connection to the Database object. This is simple, we just need to overload the constructor and "),s("code",[t._v("getInstance")]),t._v(" methods. We can do this by adding the following code to the "),s("code",[t._v("Database")]),t._v(" class:")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Database")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   \t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("connection "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" connection"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Database")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" conn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tinstance "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Database")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" instance"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[t._v("We are now ready to test the "),s("code",[t._v("TodoDao")]),t._v(" class.")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[s("p",[t._v("In "),s("code",[t._v("src/test/java/com/yatl/dao")]),t._v(" create a class called "),s("code",[t._v("TodoDaoTest")]),t._v(".")])]),t._v(" "),s("li",[s("p",[t._v("The first thing you need to do is create a "),s("code",[t._v("@BeforeEach")]),t._v(" method that will run the seeder for each test. You can do this by adding the following code to the "),s("code",[t._v("TodoDaoTest")]),t._v(" class:")])])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n   \t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoDao")]),t._v(" todoDAO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@BeforeEach")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdbc:sqlite::memory:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestSeeder")]),t._v(" seeder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestSeeder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tseeder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTables")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Database")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("seeder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\ttodoDAO "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoDao")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("blockquote",[s("blockquote",[s("p",[t._v("Ensure you add the correct imports to the top of the class. You can do this by pressing "),s("code",[t._v("Ctrl + Shift + O")]),t._v(" in Eclipse.")])])]),t._v(" "),s("p",[t._v("Above, we are using the test seeder to create a new database in memory. We then pass the connection to the "),s("code",[t._v("Database")]),t._v(" class. As the Database class is a singleton, the entire application will use our in-memory database. The final thing we do is create a new "),s("code",[t._v("TodoDao")]),t._v(" object, this is what we will be testing.")]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("See if you can write the following tests methods:")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("testGetAllTodos")]),t._v(" - This method should test the "),s("code",[t._v("getAllTodos")]),t._v(" method. You should assert that the list of todos returned is the correct length (4). Don't test the values of each todo, this is overkill. Later we will run integration tests to test the values of the todos.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("testById")]),t._v(" - This method should test the "),s("code",[t._v("getTodo")]),t._v(" method. You should assert that the todo returned is the correct todo by checking the title. As this point you can test the title of the todo (e.g., Learn Java). Since it's unique, it's a good test.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("testGetByStatus")]),t._v(" - This method should test the "),s("code",[t._v("getByStatus")]),t._v(" method. For getByStatus(true) the length of the list should be 1 (the number for completed todos). For getByStatus(false) 3, the number of active todos.")])])]),t._v(" "),s("p",[s("strong",[t._v("HINT:")]),t._v(" Here's an example of how you might test the "),s("code",[t._v("getAllTodos")]),t._v(" method:")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testGetAllTodos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Todo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" todos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\ttodos "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" todoDAO"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assertEquals")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" todos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("size")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fail")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"SQL Exception"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("a",{attrs:{href:"https://gitlab.surrey.ac.uk/com_1028_labs/lab-6/-/blob/exercise-2-2-solutions/src/test/java/com/yatl/dao/TodoDaoTest.java?ref_type=heads",target:"_blank",rel:"noopener noreferrer"}},[t._v("If you got stuck, check the solutions here"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"exercise-2-3-testing-the-controller-class"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exercise-2-3-testing-the-controller-class"}},[t._v("#")]),t._v(" Exercise 2.3: Testing the Controller Class")]),t._v(" "),s("p",[t._v("Controllers are the glue between our data layer and the view. In our case the view is the API. To trigger the API we'd need to send an HTTP request. However, we don't want to do this, right now. We want to test the controller in isolation. As such, we need to mock the HTTP request. We can do this using the "),s("code",[t._v("Mockito")]),t._v(" library.")]),t._v(" "),s("p",[t._v("Furthermore, you'll notice we pass a "),s("code",[t._v("TodoDao")]),t._v(" object to the "),s("code",[t._v("TodoController")]),t._v(" class. Again, we don't want to test the "),s("code",[t._v("TodoDao")]),t._v(" class, we want to test the "),s("code",[t._v("TodoController")]),t._v(" class. As such, we also need to mock the "),s("code",[t._v("TodoDao")]),t._v(".")]),t._v(" "),s("ol",[s("li",[t._v("Create a new class called "),s("code",[t._v("TodoControllerTest")]),t._v(" in the "),s("code",[t._v("com.yatl.controller")]),t._v(" test package.")])]),t._v(" "),s("p",[t._v("Let's, first, consider how we might test the "),s("code",[t._v("getAllTodos")]),t._v(" method on the TodoController. This method is responsible for returning all the todos. It has the following requirements:")]),t._v(" "),s("ul",[s("li",[t._v("If the status is null, the "),s("code",[t._v("getAll")]),t._v(" method on the DAO is called.")]),t._v(" "),s("li",[t._v('If the status is "completed", the '),s("code",[t._v("getByStatus")]),t._v(" method on the Dao is called with the parameter "),s("code",[t._v("true")]),t._v(".")]),t._v(" "),s("li",[t._v('If the status is "active", the '),s("code",[t._v("getByStatus")]),t._v(" method on the Dao is called with the parameter "),s("code",[t._v("false")]),t._v(".")]),t._v(" "),s("li",[t._v("If an exception is thrown, the HTTP status is set to 500.")])]),t._v(" "),s("p",[t._v("Let's test the first three points.")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("Set up your mocks before each test. You can do this by adding the following code to the "),s("code",[t._v("TodoControllerTest")]),t._v(" class:")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yatl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("controller")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import static"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mockito"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Mockito")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token static"}},[t._v("mock")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jupiter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeforeEach")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yatl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoDao")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("javalin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("http"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Context")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoControllerTest")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Context")]),t._v(" ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoDao")]),t._v(" todoDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoController")]),t._v(" todoController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n   "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@BeforeEach")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n   \tctx "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Context")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   \ttodoDao "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mock")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoDao")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   \ttodoController "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TodoController")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("todoDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Now, create your test:")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testGetAllTodos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\ttodoController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllTodos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("todoDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("blockquote",[s("blockquote",[s("p",[t._v("Ensure you add the correct imports to the top of the class. You can do this by pressing "),s("code",[t._v("Ctrl + Shift + O")]),t._v(" in Eclipse.")])])]),t._v(" "),s("p",[t._v("Above, we are testing when the "),s("code",[t._v("getAllMethod")]),t._v(" is called, the default behavior it to call the "),s("code",[t._v("getAll")]),t._v(" method on the "),s("code",[t._v("TodoDao")]),t._v(" object. Run the test.")]),t._v(" "),s("p",[s("strong",[t._v("ALERT:")]),t._v(" Notice how our test failed with the following message:")]),t._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Wanted 1 time:\n-> at com.yatl.dao.TodoDao.getAll(TodoDao.java:25)\nBut was 2 times:\n")])])]),s("p",[t._v("We are calling getAll todos in error at the start of the controller, "),s("code",[t._v("getAllTodos")]),t._v(", method. We should change this line to "),s("code",[t._v("List<Todo> todos = null")]),t._v(". When you have done this, run the test again. It should pass. This was actually a mistake I made; however, I only spotted it when I ran the test.")]),t._v(" "),s("p",[t._v("Let's now consider how we can test the second two points, get by completed and active todos. To achieve this, we need to stub the return value of the "),s("code",[t._v("queryParam")]),t._v(" method. We can do this using this technique: "),s("code",[t._v('when(ctx.queryParam("status")).thenReturn("completed");')])]),t._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[t._v("Add the following test to the "),s("code",[t._v("TodoControllerTest")]),t._v(" class:")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testGetTodosByStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryParam")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thenReturn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"completed"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\ttodoController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllTodos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("todoDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getByStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("queryParam")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"status"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("thenReturn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"active"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\ttodoController"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getAllTodos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("verify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("todoDao"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getByStatus")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SQLException")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// TODO Auto-generated catch block")]),t._v("\n\t\t\te"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("blockquote",[s("blockquote",[s("p",[t._v("Ensure you add the correct imports to the top of the class. You can do this by pressing "),s("code",[t._v("Ctrl + Shift + O")]),t._v(" in Eclipse.")])])]),t._v(" "),s("p",[t._v('Above, we are testing that when the status is "completed" the '),s("code",[t._v("getByStatus")]),t._v(" method is called with the parameter "),s("code",[t._v("true")]),t._v('. When the status is "active" the '),s("code",[t._v("getByStatus")]),t._v(" method is called with the parameter "),s("code",[t._v("false")]),t._v(".")]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("Now it's your turn! Complete this task by adding the following tests:")])]),t._v(" "),s("ul",[s("li",[s("p",[s("code",[t._v("public void testThrows500WhenGetAllDatabaseError()")]),t._v(" - this tests the final point, if an exception is thrown, the status is set to 500. You can stub the "),s("code",[t._v("getAll")]),t._v(" method to throw an exception like this: "),s("code",[t._v("when(todoDao.getAll()).thenThrow(new SQLException());")]),t._v(" You can then check the status code like this: "),s("code",[t._v("verify(ctx).status(500);")]),t._v(".")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("public void testGetTodoById()")]),t._v(" - to create this test stub the value returned from the path param method. You can do this like this: "),s("code",[t._v('when(ctx.pathParam("id")).thenReturn("1");')]),t._v(". You should check that the "),s("code",[t._v("getTodo")]),t._v(" method is called with the parameter 1.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("public void testThrows500WhenGetByIdDatabaseError()")]),t._v(" - similar to the exception test above.")])]),t._v(" "),s("li",[s("p",[s("code",[t._v("public void testThrows404WhenTodoNotFound")]),t._v(" - check that the status is set to 404 when the todo is not found. You can do this by stubbing the "),s("code",[t._v("getTodo")]),t._v(" method to return null.")])])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://gitlab.surrey.ac.uk/com_1028_labs/lab-6/-/blob/exercise-2-3-solutions/src/test/java/com/yatl/controller/TodoControllerTest.java?ref_type=heads",target:"_blank",rel:"noopener noreferrer"}},[t._v("If you got stuck, check the solutions here"),s("OutboundLink")],1),t._v("`")]),t._v(" "),s("h3",{attrs:{id:"exercise-2-4-pulling-everything-together-with-integration-tests"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exercise-2-4-pulling-everything-together-with-integration-tests"}},[t._v("#")]),t._v(" Exercise 2.4: Pulling everything together with integration tests")]),t._v(" "),s("p",[t._v("We are now ready to pull everything together with integrations tests. These could also be called system tests. We are going to test the entire application, from the controller to the database. We will use the "),s("code",[t._v("RestAssured")]),t._v(" library to do this.")]),t._v(" "),s("p",[t._v("As integration tests cover the entire application, we are going to create them all in one file that lives in the "),s("code",[t._v("com.yatl")]),t._v(" test package.")]),t._v(" "),s("ol",[s("li",[t._v("Create a new class called "),s("code",[t._v("IntegrationTests")]),t._v(" in the "),s("code",[t._v("com.yatl")]),t._v(" test package.")])]),t._v(" "),s("p",[t._v("The first thing we need to do is create a test version of our application and seed our in-memory database, just like we did when testing the DAO.")]),t._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[t._v("At the top of the class, add the following code:")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yatl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// rest assured imports; we will use these to test our API")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import static"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("restassured"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestAssured")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token static"}},[t._v("given")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import static"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hamcrest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Matchers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token static"}},[t._v("equalTo")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import static"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hamcrest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Matchers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token static"}},[t._v("hasItems")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jupiter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AfterEach")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("jupiter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BeforeEach")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yatl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Database")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yatl"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestSeeder")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("javalin"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Javalin")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IntegrationTests")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Javalin")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestSeeder")]),t._v(" seeder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" port "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" baseUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@BeforeEach")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setUp")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" url "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"jdbc:sqlite::memory:"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tseeder "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TestSeeder")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tseeder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createTables")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Database")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getInstance")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("seeder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t\tapp "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("AppConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("startServer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@AfterEach")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("tearDown")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tapp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stop")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Above, we are creating a new "),s("code",[t._v("TestSeeder")]),t._v(" object and creating a new database in-memory. We then pass the connection to the "),s("code",[t._v("Database")]),t._v(" class. We then start the server on port 6000. We are using the "),s("code",[t._v("AppConfig")]),t._v(" class to start the server. This is a class that lives in the "),s("code",[t._v("com.yatl")]),t._v(" package of our application.")]),t._v(" "),s("p",[t._v("We can now use the "),s("code",[t._v("RestAssured")]),t._v(" library to test our API. This library allows us to send HTTP requests to our API and assert the response. For instance, we can write a test like this:")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testGetAllTodos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("given")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("baseUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/todos"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assertThat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("statusCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[t._v("Above, we are sending a "),s("code",[t._v("GET")]),t._v(" request to the "),s("code",[t._v("/todos")]),t._v(" endpoint and asserting that the status code is 200. This is a simple test, but it's a good start. We can also take things further and inspect the the records in the response.")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testGetAllTodos")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("given")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("baseUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/todos"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assertThat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("statusCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasItems")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasItems")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Learn Java"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Vote for Joe"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Buy a car"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Ace Joes Module"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[t._v("The above code tests if the expected todos' id and titles are returned in a JSON list - pretty awesome, and close to how a real client application would interact with the API. If the response is not as expected, the test will fail.")]),t._v(" "),s("p",[t._v("We can also test if we can retrieve a single todo:")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("\n"),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("testGetTodoById")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("given")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("when")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("baseUrl "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/todos/1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assertThat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("statusCode")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("200")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equalTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\t\t\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("equalTo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Learn Java"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),s("p",[t._v("Notice how we are using the "),s("code",[t._v("equalTo")]),t._v(" method to test the values of the movie, this is because it is a single item. It will look like this:")]),t._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"id"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"title"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Learn Java"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[t._v('"completed"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",[s("li",[s("a",{attrs:{href:"https://github.com/rest-assured/rest-assured/wiki/Usage#example-1---json",target:"_blank",rel:"noopener noreferrer"}},[t._v("Can you use the Rest Assured documentation, and my example above, to write tests for the following requirements"),s("OutboundLink")],1),t._v(":")])]),t._v(" "),s("ul",[s("li",[t._v("When I send a GET request to /todos, I should receive a list of todos.")]),t._v(" "),s("li",[t._v("When I send a GET request to /todos/1, I should receive the todo with the id of 1.")]),t._v(" "),s("li",[t._v("When I send a GET request to /todos?status=completed, I should receive a list of completed todos.")]),t._v(" "),s("li",[t._v("When I send a GET request to /todos?status=active, I should receive a list of active todos.")]),t._v(" "),s("li",[t._v("When I send a request with an invalid id, I should receive a 404 status code.")])]),t._v(" "),s("p",[t._v("To get the above tests to work, you'll need to ensure the following imports are at the top of the "),s("code",[t._v("IntegrationTests")]),t._v(" class:")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import static"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("io"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("restassured"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RestAssured")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token static"}},[t._v("given")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import static"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hamcrest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Matchers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token static"}},[t._v("equalTo")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token import static"}},[s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hamcrest"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Matchers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token static"}},[t._v("hasItems")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[s("a",{attrs:{href:"https://gitlab.surrey.ac.uk/com_1028_labs/lab-6/-/blob/exercise-2-4-solutions/src/test/java/com/yatl/IntegrationTests.java?ref_type=heads",target:"_blank",rel:"noopener noreferrer"}},[t._v("If you got stuck, check the solutions here"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("strong",[t._v("END OF LAB ")])])])}),[],!1,null,null,null);s.default=n.exports}}]);